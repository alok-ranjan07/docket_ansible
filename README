# with docker swarm

```
docker swarm init
docker network create -d overlay ansible_net
docker pull alokranjan2000/ansible_nodes
```

# create ansible stack

```
docker stack deploy -c docker-compose.yml ansible_stack
```

# To scale target nodes up/down [N=number of target node required]

```
docker service scale ansible_stack_target=N
```

# To update the inventory file After services are up

```
python generate_inventory.py
```

# or

```
node generate_inventory.js
```

# Run playbook

```
docker exec -it $(docker ps -q --filter name=ansible_stack_master) ansible-playbook /etc/ansible/playbook/playbook.yml -u ansible
```

# Check the result

```
docker service ps ansible_stack_target
```

# destroy all services

```
docker stack rm ansible_stack
```
